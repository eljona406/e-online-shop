<div class="login">
	<div class="form">
		<h2>Login</h2>
		<form [formGroup]="loginForm" (ngSubmit)="onSubmit()">
			<mat-form-field appearance="fill">
				<mat-label>Email</mat-label>
				<input
					matInput
					id="login-email"
					formControlName="email"
					type="email"
					required
					aria-describedby="email-error" />

				@if (loginForm.get('email')?.invalid && loginForm.get('email')?.touched) {
					<mat-error id="email-error">
						Email is required and must be valid.
					</mat-error>
				}
			</mat-form-field>

			<mat-form-field appearance="fill">
				<mat-label>Password</mat-label>
				<input
					matInput
					id="login-password"
					formControlName="password"
					type="password"
					required
					aria-describedby="password-error" />

				@if (loginForm.get('password')?.invalid && loginForm.get('password')?.touched) {
					<mat-error id="password-error">
						Password is required.
					</mat-error>
				}
			</mat-form-field>

			<button
				mat-raised-button
				color="primary"
				type="submit"
				[disabled]="loginForm.invalid">
				Login
			</button>

			<!-- Error message with @if -->
			@if (errorMessage) {
				<div role="alert">{{ errorMessage }}</div>
			}

			<div>
				<p>
					If you are not registered yet, <a
						routerLink="/register"
						routerLinkActive="active">
						redirect to registration
					</a>
				</p>
			</div>
		</form>
	</div>
</div>
